use super::{Detector, LspMessage};
use semver::Version;
use slang_solidity::cst::{Cursor, Node, NonterminalKind, Query, TextIndex};
use slang_solidity::parser::Parser;
use std::future::Future;
use std::path::PathBuf;
use std::pin::Pin;
use tower_lsp::lsp_types::{Diagnostic, DiagnosticSeverity, Position, Range};

#[derive(Debug)]
pub struct StructsDetector;

impl Detector for StructsDetector {
    fn run(
        &self,
        path: PathBuf,
        content: String,
    ) -> Pin<Box<dyn Future<Output = Vec<LspMessage>> + Send + '_>> {
        Box::pin(async move {
            let parser =
                Parser::create(Version::parse("0.8.13").unwrap()).expect("wrong solidity version");

            let parse_output = parser.parse(NonterminalKind::SourceUnit, &content);

            if parse_output.errors().is_empty() {
                Self::find_structs(path, parse_output.tree())
            } else {
                log::error!("{:?}", parse_output.errors());
                vec![]
            }
        })
    }
}

impl StructsDetector {
    fn find_structs(path: PathBuf, tree: Node) -> Vec<LspMessage> {
        let query = Query::parse("[StructDefinition @struct_name name:[Identifier]]").unwrap();
        let cursor = tree.cursor_with_offset(TextIndex::ZERO);

        let cursors: Vec<_> = cursor
            .query(vec![query])
            .flat_map(|query_match| {
                query_match
                    .captures()
                    .flat_map(|(.., cursors)| cursors.collect::<Vec<_>>())
                    .collect::<Vec<_>>()
            })
            .collect();

        //  Cursor { parent: Some(PathAncestor { parent: Some(PathAncestor { parent: Some(PathAncestor { parent: Some(PathAncestor { parent: None, nonterminal_node: NonterminalNode { kind: SourceUnit, text_len: TextIndex { utf8: 295, utf16: 295, line: 19, column: 0 }, children: [Edge { label: Some(Members), node: Nonterminal(NonterminalNode { kind: SourceUnitMembers, text_len: TextIndex { utf8: 295, utf16: 295, line: 19, column: 0 }, children: [Edge { label: Some(Item), node: Nonterminal(NonterminalNode { kind: SourceUnitMember, text_len: TextIndex { utf8: 65, utf16: 65, line: 3, column: 0 }, children: [Edge { label: Some(Variant), node: Nonterminal(NonterminalNode { kind: PragmaDirective, text_len: TextIndex { utf8: 65, utf16: 65, line: 3, column: 0 }, children: [Edge { label: Some(LeadingTrivia), node: Terminal(TerminalNode { kind: SingleLineComment, text: "// SPDX-License-Identifier: UNLICENSED" }) }, Edge { label: Some(LeadingTrivia), node: Terminal(TerminalNode { kind: EndOfLine, text: "\n" }) }, Edge { label: Some(LeadingTrivia), node: Terminal(TerminalNode { kind: EndOfLine, text: "\n" }) }, Edge { label: Some(PragmaKeyword), node: Terminal(TerminalNode { kind: PragmaKeyword, text: "pragma" }) }, Edge { label: Some(Pragma), node: Nonterminal(NonterminalNode { kind: Pragma, text_len: TextIndex { utf8: 17, utf16: 17, line: 0, column: 17 }, children: [Edge { label: Some(Variant), node: Nonterminal(NonterminalNode { kind: VersionPragma, text_len: TextIndex { utf8: 17, utf16: 17, line: 0, column: 17 }, children: [Edge { label: Some(LeadingTrivia), node: Terminal(TerminalNode { kind: Whitespace, text: " " }) }, Edge { label: Some(SolidityKeyword), node: Terminal(TerminalNode { kind: SolidityKeyword, text: "solidity" }) }, Edge { label: Some(Sets), node: Nonterminal(NonterminalNode { kind: VersionExpressionSets, text_len: TextIndex { utf8: 8, utf16: 8, line: 0, column: 8 }, children: [Edge { label: Some(Item), node: Nonterminal(NonterminalNode { kind: VersionExpressionSet, text_len: TextIndex { utf8: 8, utf16: 8, line: 0, column: 8 }, children: [Edge { label: Some(Item), node: Nonterminal(NonterminalNode { kind: VersionExpression, text_len: TextIndex { utf8: 8, utf16: 8, line: 0, column: 8 }, children: [Edge { label: Some(Variant), node: Nonterminal(NonterminalNode { kind: VersionTerm, text_len: TextIndex { utf8: 8, utf16: 8, line: 0, column: 8 }, children: [Edge { label: Some(Operator), node: Nonterminal(NonterminalNode { kind: VersionOperator, text_len: TextIndex { utf8: 2, utf16: 2, line: 0, column: 2 }, children: [Edge { label: Some(LeadingTrivia), node: Terminal(TerminalNode { kind: Whitespace, text: " " }) }, Edge { label: Some(Variant), node: Terminal(TerminalNode { kind: Caret, text: "^" }) }] }) }, Edge { label: Some(Literal), node: Nonterminal(NonterminalNode { kind: VersionLiteral, text_len: TextIndex { utf8: 6, utf16: 6, line: 0, column: 6 }, children: [Edge { label: Some(Variant), node: Nonterminal(NonterminalNode { kind: SimpleVersionLiteral, text_len: TextIndex { utf8: 6, utf16: 6, line: 0, column: 6 }, children: [Edge { label: Some(Item), node: Terminal(TerminalNode { kind: VersionSpecifier, text: "0" }) }, Edge { label: Some(Separator), node: Terminal(TerminalNode { kind: Period, text: "." }) }, Edge { label: Some(Item), node: Terminal(TerminalNode { kind: VersionSpecifier, text: "8" }) }, Edge { label: Some(Separator), node: Terminal(TerminalNode { kind: Period, text: "." }) }, Edge { label: Some(Item), node: Terminal(TerminalNode { kind: VersionSpecifier, text: "13" }) }] }) }] }) }] }) }] }) }] }) }] }) }] }) }] }) }, Edge { label: Some(Semicolon), node: Terminal(TerminalNode { kind: Semicolon, text: ";" }) }, Edge { label: Some(TrailingTrivia), node: Terminal(TerminalNode { kind: EndOfLine, text: "\n" }) }] }) }] }) }, Edge { label: Some(Item), node: Nonterminal(NonterminalNode { kind: SourceUnitMember, text_len: TextIndex { utf8: 19, utf16: 19, line: 3, column: 0 }, children: [Edge { label: Some(Variant), node: Nonterminal(NonterminalNode { kind: StructDefinition, text_len: TextIndex { utf8: 19, utf16: 19, line: 3, column: 0 }, children: [Edge { label: Some(LeadingTrivia), node: Terminal(TerminalNode { kind: EndOfLine, text: "\n" }) }, Edge { label: Some(LeadingTrivia), node: Terminal(TerminalNode { kind: EndOfLine, text: "\n" }) }, Edge { label: Some(StructKeyword), node: Terminal(TerminalNode { kind: StructKeyword, text: "struct" }) }, Edge { label: Some(LeadingTrivia), node: Terminal(TerminalNode { kind: Whitespace, text: " " }) }, Edge { label: Some(Name), node: Terminal(TerminalNode { kind: Identifier, text: "Hello1" }) }, Edge { label: Some(LeadingTrivia), node: Terminal(TerminalNode { kind: Whitespace, text: " " }) }, Edge { label: Some(OpenBrace), node: Terminal(TerminalNode { kind: OpenBrace, text: "{" }) }, Edge { label: Some(Members), node: Nonterminal(NonterminalNode { kind: StructMembers, text_len: TextIndex { utf8: 0, utf16: 0, line: 0, column: 0 }, children: [] }) }, Edge { label: Some(CloseBrace), node: Terminal(TerminalNode { kind: CloseBrace, text: "}" }) }, Edge { label: Some(TrailingTrivia), node: Terminal(TerminalNode { kind: EndOfLine, text: "\n" }) }] }) }] }) }, Edge { label: Some(Item), node: Nonterminal(NonterminalNode { kind: SourceUnitMember, text_len: TextIndex { utf8: 17, utf16: 17, line: 1, column: 0 }, children: [Edge { label: Some(Variant), node: Nonterminal(NonterminalNode { kind: StructDefinition, text_len: TextIndex { utf8: 17, utf16: 17, line: 1, column: 0 }, children: [Edge { label: Some(StructKeyword), node: Terminal(TerminalNode { kind: StructKeyword, text: "struct" }) }, Edge { label: Some(LeadingTrivia), node: Terminal(TerminalNode { kind: Whitespace, text: " " }) }, Edge { label: Some(Name), node: Terminal(TerminalNode { kind: Identifier, text: "Hello2" }) }, Edge { label: Some(LeadingTrivia), node: Terminal(TerminalNode { kind: Whitespace, text: " " }) }, Edge { label: Some(OpenBrace), node: Terminal(TerminalNode { kind: OpenBrace, text: "{" }) }, Edge { label: Some(Members), node: Nonterminal(NonterminalNode { kind: StructMembers, text_len: TextIndex { utf8: 0, utf16: 0, line: 0, column: 0 }, children: [] }) }, Edge { label: Some(CloseBrace), node: Terminal(TerminalNode { kind: CloseBrace, text: "}" }) }, Edge { label: Some(TrailingTrivia), node: Terminal(TerminalNode { kind: EndOfLine, text: "\n" }) }] }) }] }) }, Edge { label: Some(Item), node: Nonterminal(NonterminalNode { kind: SourceUnitMember, text_len: TextIndex { utf8: 194, utf16: 194, line: 12, column: 0 }, children: [Edge { label: Some(Variant), node: Nonterminal(NonterminalNode { kind: ContractDefinition, text_len: TextIndex { utf8: 194, utf16: 194, line: 12, column: 0 }, children: [Edge { label: Some(LeadingTrivia), node: Terminal(TerminalNode { kind: EndOfLine, text: "\n" }) }, Edge { label: Some(ContractKeyword), node: Terminal(TerminalNode { kind: ContractKeyword, text: "contract" }) }, Edge { label: Some(LeadingTrivia), node: Terminal(TerminalNode { kind: Whitespace, text: " " }) }, Edge { label: Some(Name), node: Terminal(TerminalNode { kind: Identifier, text: "Counter" }) }, Edge { label: Some(LeadingTrivia), node: Terminal(TerminalNode { kind: Whitespace, text: " " }) }, Edge { label: Some(OpenBrace), node: Terminal(TerminalNode { kind: OpenBrace, text: "{" }) }, Edge { label: Some(TrailingTrivia), node: Terminal(TerminalNode { kind: EndOfLine, text: "\n" }) }, Edge { label: Some(Members), node: Nonterminal(NonterminalNode { kind: ContractMembers, text_len: TextIndex { utf8: 172, utf16: 172, line: 9, column: 0 }, children: [Edge { label: Some(Item), node: Nonterminal(NonterminalNode { kind: ContractMember, text_len: TextIndex { utf8: 27, utf16: 27, line: 1, column: 0 }, children: [Edge { label: Some(Variant), node: Nonterminal(NonterminalNode { kind: StateVariableDefinition, text_len: TextIndex { utf8: 27, utf16: 27, line: 1, column: 0 }, children: [Edge { label: Some(TypeName), node: Nonterminal(NonterminalNode { kind: TypeName, text_len: TextIndex { utf8: 11, utf16: 11, line: 0, column: 11 }, children: [Edge { label: Some(Variant), node: Nonterminal(NonterminalNode { kind: ElementaryType, text_len: TextIndex { utf8: 11, utf16: 11, line: 0, column: 11 }, children: [Edge { label: Some(LeadingTrivia), node: Terminal(TerminalNode { kind: Whitespace, text: "    " }) }, Edge { label: Some(Variant), node: Terminal(TerminalNode { kind: UintKeyword, text: "uint256" }) }] }) }] }) }, Edge { label: Some(Attributes), node: Nonterminal(NonterminalNode { kind: StateVariableAttributes, text_len: TextIndex { utf8: 7, utf16: 7, line: 0, column: 7 }, children: [Edge { label: Some(Item), node: Nonterminal(NonterminalNode { kind: StateVariableAttribute, text_len: TextIndex { utf8: 7, utf16: 7, line: 0, column: 7 }, children: [Edge { label: Some(LeadingTrivia), node: Terminal(TerminalNode { kind: Whitespace, text: " " }) }, Edge { label: Some(Variant), node: Terminal(TerminalNode { kind: PublicKeyword, text: "public" }) }] }) }] }) }, Edge { label: Some(LeadingTrivia), node: Terminal(TerminalNode { kind: Whitespace, text: " " }) }, Edge { label: Some(Name), node: Terminal(TerminalNode { kind: Identifier, text: "number" }) }, Edge { label: Some(Semicolon), node: Terminal(TerminalNode { kind: Semicolon, text: ";" }) }, Edge { label: Some(TrailingTrivia), node: Terminal(TerminalNode { kind: EndOfLine, text: "\n" }) }] }) }] }) }, Edge { label: Some(Item), node: Nonterminal(NonterminalNode { kind: ContractMember, text_len: TextIndex { utf8: 86, utf16: 86, line: 4, column: 0 }, children: [Edge { label: Some(Variant), node: Nonterminal(NonterminalNode { kind: FunctionDefinition, text_len: TextIndex { utf8: 86, utf16: 86, line: 4, column: 0 }, children: [Edge { label: Some(LeadingTrivia), node: Terminal(TerminalNode { kind: EndOfLine, text: "\n" }) }, Edge { label: Some(LeadingTrivia), node: Terminal(TerminalNode { kind: Whitespace, text: "    " }) }, Edge { label: Some(FunctionKeyword), node: Terminal(TerminalNode { kind: FunctionKeyword, text: "function" }) }, Edge { label: Some(Name), node: Nonterminal(NonterminalNode { kind: FunctionName, text_len: TextIndex { utf8: 10, utf16: 10, line: 0, column: 10 }, children: [Edge { label: Some(LeadingTrivia), node: Terminal(TerminalNode { kind: Whitespace, text: " " }) }, Edge { label: Some(Variant), node: Terminal(TerminalNode { kind: Identifier, text: "setNumber" }) }] }) }, Edge { label: Some(Parameters), node: Nonterminal(NonterminalNode { kind: ParametersDeclaration, text_len: TextIndex { utf8: 19, utf16: 19, line: 0, column: 19 }, children: [Edge { label: Some(OpenParen), node: Terminal(TerminalNode { kind: OpenParen, text: "(" }) }, Edge { label: Some(Parameters), node: Nonterminal(NonterminalNode { kind: Parameters, text_len: TextIndex { utf8: 17, utf16: 17, line: 0, column: 17 }, children: [Edge { label: Some(Item), node: Nonterminal(NonterminalNode { kind: Parameter, text_len: TextIndex { utf8: 17, utf16: 17, line: 0, column: 17 }, children: [Edge { label: Some(TypeName), node: Nonterminal(NonterminalNode { kind: TypeName, text_len: TextIndex { utf8: 7, utf16: 7, line: 0, column: 7 }, children: [Edge { label: Some(Variant), node: Nonterminal(NonterminalNode { kind: ElementaryType, text_len: TextIndex { utf8: 7, utf16: 7, line: 0, column: 7 }, children: [Edge { label: Some(Variant), node: Terminal(TerminalNode { kind: UintKeyword, text: "uint256" }) }] }) }] }) }, Edge { label: Some(LeadingTrivia), node: Terminal(TerminalNode { kind: Whitespace, text: " " }) }, Edge { label: Some(Name), node: Terminal(TerminalNode { kind: Identifier, text: "newNumber" }) }] }) }] }) }, Edge { label: Some(CloseParen), node: Terminal(TerminalNode { kind: CloseParen, text: ")" }) }] }) }, Edge { label: Some(Attributes), node: Nonterminal(NonterminalNode { kind: FunctionAttributes, text_len: TextIndex { utf8: 7, utf16: 7, line: 0, column: 7 }, children: [Edge { label: Some(Item), node: Nonterminal(NonterminalNode { kind: FunctionAttribute, text_len: TextIndex { utf8: 7, utf16: 7, line: 0, column: 7 }, children: [Edge { label: Some(LeadingTrivia), node: Terminal(TerminalNode { kind: Whitespace, text: " " }) }, Edge { label: Some(Variant), node: Terminal(TerminalNode { kind: PublicKeyword, text: "public" }) }] }) }] }) }, Edge { label: Some(Body), node: Nonterminal(NonterminalNode { kind: FunctionBody, text_len: TextIndex { utf8: 37, utf16: 37, line: 3, column: 0 }, children: [Edge { label: Some(Variant), node: Nonterminal(NonterminalNode { kind: Block, text_len: TextIndex { utf8: 37, utf16: 37, line: 3, column: 0 }, children: [Edge { label: Some(LeadingTrivia), node: Terminal(TerminalNode { kind: Whitespace, text: " " }) }, Edge { label: Some(OpenBrace), node: Terminal(TerminalNode { kind: OpenBrace, text: "{" }) }, Edge { label: Some(TrailingTrivia), node: Terminal(TerminalNode { kind: EndOfLine, text: "\n" }) }, Edge { label: Some(Statements), node: Nonterminal(NonterminalNode { kind: Statements, text_len: TextIndex { utf8: 28, utf16: 28, line: 1, column: 0 }, children: [Edge { label: Some(Item), node: Nonterminal(NonterminalNode { kind: Statement, text_len: TextIndex { utf8: 28, utf16: 28, line: 1, column: 0 }, children: [Edge { label: Some(Variant), node: Nonterminal(NonterminalNode { kind: ExpressionStatement, text_len: TextIndex { utf8: 28, utf16: 28, line: 1, column: 0 }, children: [Edge { label: Some(Expression), node: Nonterminal(NonterminalNode { kind: Expression, text_len: TextIndex { utf8: 26, utf16: 26, line: 0, column: 26 }, children: [Edge { label: Some(Variant), node: Nonterminal(NonterminalNode { kind: AssignmentExpression, text_len: TextIndex { utf8: 26, utf16: 26, line: 0, column: 26 }, children: [Edge { label: Some(LeftOperand), node: Nonterminal(NonterminalNode { kind: Expression, text_len: TextIndex { utf8: 14, utf16: 14, line: 0, column: 14 }, children: [Edge { label: Some(LeadingTrivia), node: Terminal(TerminalNode { kind: Whitespace, text: "        " }) }, Edge { label: Some(Variant), node: Terminal(TerminalNode { kind: Identifier, text: "number" }) }] }) }, Edge { label: Some(LeadingTrivia), node: Terminal(TerminalNode { kind: Whitespace, text: " " }) }, Edge { label: Some(Operator), node: Terminal(TerminalNode { kind: Equal, text: "=" }) }, Edge { label: Some(RightOperand), node: Nonterminal(NonterminalNode { kind: Expression, text_len: TextIndex { utf8: 10, utf16: 10, line: 0, column: 10 }, children: [Edge { label: Some(LeadingTrivia), node: Terminal(TerminalNode { kind: Whitespace, text: " " }) }, Edge { label: Some(Variant), node: Terminal(TerminalNode { kind: Identifier, text: "newNumber" }) }] }) }] }) }] }) }, Edge { label: Some(Semicolon), node: Terminal(TerminalNode { kind: Semicolon, text: ";" }) }, Edge { label: Some(TrailingTrivia), node: Terminal(TerminalNode { kind: EndOfLine, text: "\n" }) }] }) }] }) }] }) }, Edge { label: Some(LeadingTrivia), node: Terminal(TerminalNode { kind: Whitespace, text: "    " }) }, Edge { label: Some(CloseBrace), node: Terminal(TerminalNode { kind: CloseBrace, text: "}" }) }, Edge { label: Some(TrailingTrivia), node: Terminal(TerminalNode { kind: EndOfLine, text: "\n" }) }] }) }] }) }] }) }] }) }, Edge { label: Some(Item), node: Nonterminal(NonterminalNode { kind: ContractMember, text_len: TextIndex { utf8: 59, utf16: 59, line: 4, column: 0 }, children: [Edge { label: Some(Variant), node: Nonterminal(NonterminalNode { kind: FunctionDefinition, text_len: TextIndex { utf8: 59, utf16: 59, line: 4, column: 0 }, children: [Edge { label: Some(LeadingTrivia), node: Terminal(TerminalNode { kind: EndOfLine, text: "\n" }) }, Edge { label: Some(LeadingTrivia), node: Terminal(TerminalNode { kind: Whitespace, text: "    " }) }, Edge { label: Some(FunctionKeyword), node: Terminal(TerminalNode { kind: FunctionKeyword, text: "function" }) }, Edge { label: Some(Name), node: Nonterminal(NonterminalNode { kind: FunctionName, text_len: TextIndex { utf8: 10, utf16: 10, line: 0, column: 10 }, children: [Edge { label: Some(LeadingTrivia), node: Terminal(TerminalNode { kind: Whitespace, text: " " }) }, Edge { label: Some(Variant), node: Terminal(TerminalNode { kind: Identifier, text: "increment" }) }] }) }, Edge { label: Some(Parameters), node: Nonterminal(NonterminalNode { kind: ParametersDeclaration, text_len: TextIndex { utf8: 2, utf16: 2, line: 0, column: 2 }, children: [Edge { label: Some(OpenParen), node: Terminal(TerminalNode { kind: OpenParen, text: "(" }) }, Edge { label: Some(Parameters), node: Nonterminal(NonterminalNode { kind: Parameters, text_len: TextIndex { utf8: 0, utf16: 0, line: 0, column: 0 }, children: [] }) }, Edge { label: Some(CloseParen), node: Terminal(TerminalNode { kind: CloseParen, text: ")" }) }] }) }, Edge { label: Some(Attributes), node: Nonterminal(NonterminalNode { kind: FunctionAttributes, text_len: TextIndex { utf8: 7, utf16: 7, line: 0, column: 7 }, children: [Edge { label: Some(Item), node: Nonterminal(NonterminalNode { kind: FunctionAttribute, text_len: TextIndex { utf8: 7, utf16: 7, line: 0, column: 7 }, children: [Edge { label: Some(LeadingTrivia), node: Terminal(TerminalNode { kind: Whitespace, text: " " }) }, Edge { label: Some(Variant), node: Terminal(TerminalNode { kind: PublicKeyword, text: "public" }) }] }) }] }) }, Edge { label: Some(Body), node: Nonterminal(NonterminalNode { kind: FunctionBody, text_len: TextIndex { utf8: 27, utf16: 27, line: 3, column: 0 }, children: [Edge { label: Some(Variant), node: Nonterminal(NonterminalNode { kind: Block, text_len: TextIndex { utf8: 27, utf16: 27, line: 3, column: 0 }, children: [Edge { label: Some(LeadingTrivia), node: Terminal(TerminalNode { kind: Whitespace, text: " " }) }, Edge { label: Some(OpenBrace), node: Terminal(TerminalNode { kind: OpenBrace, text: "{" }) }, Edge { label: Some(TrailingTrivia), node: Terminal(TerminalNode { kind: EndOfLine, text: "\n" }) }, Edge { label: Some(Statements), node: Nonterminal(NonterminalNode { kind: Statements, text_len: TextIndex { utf8: 18, utf16: 18, line: 1, column: 0 }, children: [Edge { label: Some(Item), node: Nonterminal(NonterminalNode { kind: Statement, text_len: TextIndex { utf8: 18, utf16: 18, line: 1, column: 0 }, children: [Edge { label: Some(Variant), node: Nonterminal(NonterminalNode { kind: ExpressionStatement, text_len: TextIndex { utf8: 18, utf16: 18, line: 1, column: 0 }, children: [Edge { label: Some(Expression), node: Nonterminal(NonterminalNode { kind: Expression, text_len: TextIndex { utf8: 16, utf16: 16, line: 0, column: 16 }, children: [Edge { label: Some(Variant), node: Nonterminal(NonterminalNode { kind: PostfixExpression, text_len: TextIndex { utf8: 16, utf16: 16, line: 0, column: 16 }, children: [Edge { label: Some(Operand), node: Nonterminal(NonterminalNode { kind: Expression, text_len: TextIndex { utf8: 14, utf16: 14, line: 0, column: 14 }, children: [Edge { label: Some(LeadingTrivia), node: Terminal(TerminalNode { kind: Whitespace, text: "        " }) }, Edge { label: Some(Variant), node: Terminal(TerminalNode { kind: Identifier, text: "number" }) }] }) }, Edge { label: Some(Operator), node: Terminal(TerminalNode { kind: PlusPlus, text: "++" }) }] }) }] }) }, Edge { label: Some(Semicolon), node: Terminal(TerminalNode { kind: Semicolon, text: ";" }) }, Edge { label: Some(TrailingTrivia), node: Terminal(TerminalNode { kind: EndOfLine, text: "\n" }) }] }) }] }) }] }) }, Edge { label: Some(LeadingTrivia), node: Terminal(TerminalNode { kind: Whitespace, text: "    " }) }, Edge { label: Some(CloseBrace), node: Terminal(TerminalNode { kind: CloseBrace, text: "}" }) }, Edge { label: Some(TrailingTrivia), node: Terminal(TerminalNode { kind: EndOfLine, text: "\n" }) }] }) }] }) }] }) }] }) }] }) }, Edge { label: Some(CloseBrace), node: Terminal(TerminalNode { kind: CloseBrace, text: "}" }) }, Edge { label: Some(TrailingTrivia), node: Terminal(TerminalNode { kind: EndOfLine, text: "\n" }) }] }) }] }) }] }) }] }, child_number: 0, text_offset: TextIndex { utf8: 0, utf16: 0, line: 0, column: 0 } }), nonterminal_node: NonterminalNode { kind: SourceUnitMembers, text_len: TextIndex { utf8: 295, utf16: 295, line: 19, column: 0 }, children: [Edge { label: Some(Item), node: Nonterminal(NonterminalNode { kind: SourceUnitMember, text_len: TextIndex { utf8: 65, utf16: 65, line: 3, column: 0 }, children: [Edge { label: Some(Variant), node: Nonterminal(NonterminalNode { kind: PragmaDirective, text_len: TextIndex { utf8: 65, utf16: 65, line: 3, column: 0 }, children: [Edge { label: Some(LeadingTrivia), node: Terminal(TerminalNode { kind: SingleLineComment, text: "// SPDX-License-Identifier: UNLICENSED" }) }, Edge { label: Some(LeadingTrivia), node: Terminal(TerminalNode { kind: EndOfLine, text: "\n" }) }, Edge { label: Some(LeadingTrivia), node: Terminal(TerminalNode { kind: EndOfLine, text: "\n" }) }, Edge { label: Some(PragmaKeyword), node: Terminal(TerminalNode { kind: PragmaKeyword, text: "pragma" }) }, Edge { label: Some(Pragma), node: Nonterminal(NonterminalNode { kind: Pragma, text_len: TextIndex { utf8: 17, utf16: 17, line: 0, column: 17 }, children: [Edge { label: Some(Variant), node: Nonterminal(NonterminalNode { kind: VersionPragma, text_len: TextIndex { utf8: 17, utf16: 17, line: 0, column: 17 }, children: [Edge { label: Some(LeadingTrivia), node: Terminal(TerminalNode { kind: Whitespace, text: " " }) }, Edge { label: Some(SolidityKeyword), node: Terminal(TerminalNode { kind: SolidityKeyword, text: "solidity" }) }, Edge { label: Some(Sets), node: Nonterminal(NonterminalNode { kind: VersionExpressionSets, text_len: TextIndex { utf8: 8, utf16: 8, line: 0, column: 8 }, children: [Edge { label: Some(Item), node: Nonterminal(NonterminalNode { kind: VersionExpressionSet, text_len: TextIndex { utf8: 8, utf16: 8, line: 0, column: 8 }, children: [Edge { label: Some(Item), node: Nonterminal(NonterminalNode { kind: VersionExpression, text_len: TextIndex { utf8: 8, utf16: 8, line: 0, column: 8 }, children: [Edge { label: Some(Variant), node: Nonterminal(NonterminalNode { kind: VersionTerm, text_len: TextIndex { utf8: 8, utf16: 8, line: 0, column: 8 }, children: [Edge { label: Some(Operator), node: Nonterminal(NonterminalNode { kind: VersionOperator, text_len: TextIndex { utf8: 2, utf16: 2, line: 0, column: 2 }, children: [Edge { label: Some(LeadingTrivia), node: Terminal(TerminalNode { kind: Whitespace, text: " " }) }, Edge { label: Some(Variant), node: Terminal(TerminalNode { kind: Caret, text: "^" }) }] }) }, Edge { label: Some(Literal), node: Nonterminal(NonterminalNode { kind: VersionLiteral, text_len: TextIndex { utf8: 6, utf16: 6, line: 0, column: 6 }, children: [Edge { label: Some(Variant), node: Nonterminal(NonterminalNode { kind: SimpleVersionLiteral, text_len: TextIndex { utf8: 6, utf16: 6, line: 0, column: 6 }, children: [Edge { label: Some(Item), node: Terminal(TerminalNode { kind: VersionSpecifier, text: "0" }) }, Edge { label: Some(Separator), node: Terminal(TerminalNode { kind: Period, text: "." }) }, Edge { label: Some(Item), node: Terminal(TerminalNode { kind: VersionSpecifier, text: "8" }) }, Edge { label: Some(Separator), node: Terminal(TerminalNode { kind: Period, text: "." }) }, Edge { label: Some(Item), node: Terminal(TerminalNode { kind: VersionSpecifier, text: "13" }) }] }) }] }) }] }) }] }) }] }) }] }) }] }) }] }) }, Edge { label: Some(Semicolon), node: Terminal(TerminalNode { kind: Semicolon, text: ";" }) }, Edge { label: Some(TrailingTrivia), node: Terminal(TerminalNode { kind: EndOfLine, text: "\n" }) }] }) }] }) }, Edge { label: Some(Item), node: Nonterminal(NonterminalNode { kind: SourceUnitMember, text_len: TextIndex { utf8: 19, utf16: 19, line: 3, column: 0 }, children: [Edge { label: Some(Variant), node: Nonterminal(NonterminalNode { kind: StructDefinition, text_len: TextIndex { utf8: 19, utf16: 19, line: 3, column: 0 }, children: [Edge { label: Some(LeadingTrivia), node: Terminal(TerminalNode { kind: EndOfLine, text: "\n" }) }, Edge { label: Some(LeadingTrivia), node: Terminal(TerminalNode { kind: EndOfLine, text: "\n" }) }, Edge { label: Some(StructKeyword), node: Terminal(TerminalNode { kind: StructKeyword, text: "struct" }) }, Edge { label: Some(LeadingTrivia), node: Terminal(TerminalNode { kind: Whitespace, text: " " }) }, Edge { label: Some(Name), node: Terminal(TerminalNode { kind: Identifier, text: "Hello1" }) }, Edge { label: Some(LeadingTrivia), node: Terminal(TerminalNode { kind: Whitespace, text: " " }) }, Edge { label: Some(OpenBrace), node: Terminal(TerminalNode { kind: OpenBrace, text: "{" }) }, Edge { label: Some(Members), node: Nonterminal(NonterminalNode { kind: StructMembers, text_len: TextIndex { utf8: 0, utf16: 0, line: 0, column: 0 }, children: [] }) }, Edge { label: Some(CloseBrace), node: Terminal(TerminalNode { kind: CloseBrace, text: "}" }) }, Edge { label: Some(TrailingTrivia), node: Terminal(TerminalNode { kind: EndOfLine, text: "\n" }) }] }) }] }) }, Edge { label: Some(Item), node: Nonterminal(NonterminalNode { kind: SourceUnitMember, text_len: TextIndex { utf8: 17, utf16: 17, line: 1, column: 0 }, children: [Edge { label: Some(Variant), node: Nonterminal(NonterminalNode { kind: StructDefinition, text_len: TextIndex { utf8: 17, utf16: 17, line: 1, column: 0 }, children: [Edge { label: Some(StructKeyword), node: Terminal(TerminalNode { kind: StructKeyword, text: "struct" }) }, Edge { label: Some(LeadingTrivia), node: Terminal(TerminalNode { kind: Whitespace, text: " " }) }, Edge { label: Some(Name), node: Terminal(TerminalNode { kind: Identifier, text: "Hello2" }) }, Edge { label: Some(LeadingTrivia), node: Terminal(TerminalNode { kind: Whitespace, text: " " }) }, Edge { label: Some(OpenBrace), node: Terminal(TerminalNode { kind: OpenBrace, text: "{" }) }, Edge { label: Some(Members), node: Nonterminal(NonterminalNode { kind: StructMembers, text_len: TextIndex { utf8: 0, utf16: 0, line: 0, column: 0 }, children: [] }) }, Edge { label: Some(CloseBrace), node: Terminal(TerminalNode { kind: CloseBrace, text: "}" }) }, Edge { label: Some(TrailingTrivia), node: Terminal(TerminalNode { kind: EndOfLine, text: "\n" }) }] }) }] }) }, Edge { label: Some(Item), node: Nonterminal(NonterminalNode { kind: SourceUnitMember, text_len: TextIndex { utf8: 194, utf16: 194, line: 12, column: 0 }, children: [Edge { label: Some(Variant), node: Nonterminal(NonterminalNode { kind: ContractDefinition, text_len: TextIndex { utf8: 194, utf16: 194, line: 12, column: 0 }, children: [Edge { label: Some(LeadingTrivia), node: Terminal(TerminalNode { kind: EndOfLine, text: "\n" }) }, Edge { label: Some(ContractKeyword), node: Terminal(TerminalNode { kind: ContractKeyword, text: "contract" }) }, Edge { label: Some(LeadingTrivia), node: Terminal(TerminalNode { kind: Whitespace, text: " " }) }, Edge { label: Some(Name), node: Terminal(TerminalNode { kind: Identifier, text: "Counter" }) }, Edge { label: Some(LeadingTrivia), node: Terminal(TerminalNode { kind: Whitespace, text: " " }) }, Edge { label: Some(OpenBrace), node: Terminal(TerminalNode { kind: OpenBrace, text: "{" }) }, Edge { label: Some(TrailingTrivia), node: Terminal(TerminalNode { kind: EndOfLine, text: "\n" }) }, Edge { label: Some(Members), node: Nonterminal(NonterminalNode { kind: ContractMembers, text_len: TextIndex { utf8: 172, utf16: 172, line: 9, column: 0 }, children: [Edge { label: Some(Item), node: Nonterminal(NonterminalNode { kind: ContractMember, text_len: TextIndex { utf8: 27, utf16: 27, line: 1, column: 0 }, children: [Edge { label: Some(Variant), node: Nonterminal(NonterminalNode { kind: StateVariableDefinition, text_len: TextIndex { utf8: 27, utf16: 27, line: 1, column: 0 }, children: [Edge { label: Some(TypeName), node: Nonterminal(NonterminalNode { kind: TypeName, text_len: TextIndex { utf8: 11, utf16: 11, line: 0, column: 11 }, children: [Edge { label: Some(Variant), node: Nonterminal(NonterminalNode { kind: ElementaryType, text_len: TextIndex { utf8: 11, utf16: 11, line: 0, column: 11 }, children: [Edge { label: Some(LeadingTrivia), node: Terminal(TerminalNode { kind: Whitespace, text: "    " }) }, Edge { label: Some(Variant), node: Terminal(TerminalNode { kind: UintKeyword, text: "uint256" }) }] }) }] }) }, Edge { label: Some(Attributes), node: Nonterminal(NonterminalNode { kind: StateVariableAttributes, text_len: TextIndex { utf8: 7, utf16: 7, line: 0, column: 7 }, children: [Edge { label: Some(Item), node: Nonterminal(NonterminalNode { kind: StateVariableAttribute, text_len: TextIndex { utf8: 7, utf16: 7, line: 0, column: 7 }, children: [Edge { label: Some(LeadingTrivia), node: Terminal(TerminalNode { kind: Whitespace, text: " " }) }, Edge { label: Some(Variant), node: Terminal(TerminalNode { kind: PublicKeyword, text: "public" }) }] }) }] }) }, Edge { label: Some(LeadingTrivia), node: Terminal(TerminalNode { kind: Whitespace, text: " " }) }, Edge { label: Some(Name), node: Terminal(TerminalNode { kind: Identifier, text: "number" }) }, Edge { label: Some(Semicolon), node: Terminal(TerminalNode { kind: Semicolon, text: ";" }) }, Edge { label: Some(TrailingTrivia), node: Terminal(TerminalNode { kind: EndOfLine, text: "\n" }) }] }) }] }) }, Edge { label: Some(Item), node: Nonterminal(NonterminalNode { kind: ContractMember, text_len: TextIndex { utf8: 86, utf16: 86, line: 4, column: 0 }, children: [Edge { label: Some(Variant), node: Nonterminal(NonterminalNode { kind: FunctionDefinition, text_len: TextIndex { utf8: 86, utf16: 86, line: 4, column: 0 }, children: [Edge { label: Some(LeadingTrivia), node: Terminal(TerminalNode { kind: EndOfLine, text: "\n" }) }, Edge { label: Some(LeadingTrivia), node: Terminal(TerminalNode { kind: Whitespace, text: "    " }) }, Edge { label: Some(FunctionKeyword), node: Terminal(TerminalNode { kind: FunctionKeyword, text: "function" }) }, Edge { label: Some(Name), node: Nonterminal(NonterminalNode { kind: FunctionName, text_len: TextIndex { utf8: 10, utf16: 10, line: 0, column: 10 }, children: [Edge { label: Some(LeadingTrivia), node: Terminal(TerminalNode { kind: Whitespace, text: " " }) }, Edge { label: Some(Variant), node: Terminal(TerminalNode { kind: Identifier, text: "setNumber" }) }] }) }, Edge { label: Some(Parameters), node: Nonterminal(NonterminalNode { kind: ParametersDeclaration, text_len: TextIndex { utf8: 19, utf16: 19, line: 0, column: 19 }, children: [Edge { label: Some(OpenParen), node: Terminal(TerminalNode { kind: OpenParen, text: "(" }) }, Edge { label: Some(Parameters), node: Nonterminal(NonterminalNode { kind: Parameters, text_len: TextIndex { utf8: 17, utf16: 17, line: 0, column: 17 }, children: [Edge { label: Some(Item), node: Nonterminal(NonterminalNode { kind: Parameter, text_len: TextIndex { utf8: 17, utf16: 17, line: 0, column: 17 }, children: [Edge { label: Some(TypeName), node: Nonterminal(NonterminalNode { kind: TypeName, text_len: TextIndex { utf8: 7, utf16: 7, line: 0, column: 7 }, children: [Edge { label: Some(Variant), node: Nonterminal(NonterminalNode { kind: ElementaryType, text_len: TextIndex { utf8: 7, utf16: 7, line: 0, column: 7 }, children: [Edge { label: Some(Variant), node: Terminal(TerminalNode { kind: UintKeyword, text: "uint256" }) }] }) }] }) }, Edge { label: Some(LeadingTrivia), node: Terminal(TerminalNode { kind: Whitespace, text: " " }) }, Edge { label: Some(Name), node: Terminal(TerminalNode { kind: Identifier, text: "newNumber" }) }] }) }] }) }, Edge { label: Some(CloseParen), node: Terminal(TerminalNode { kind: CloseParen, text: ")" }) }] }) }, Edge { label: Some(Attributes), node: Nonterminal(NonterminalNode { kind: FunctionAttributes, text_len: TextIndex { utf8: 7, utf16: 7, line: 0, column: 7 }, children: [Edge { label: Some(Item), node: Nonterminal(NonterminalNode { kind: FunctionAttribute, text_len: TextIndex { utf8: 7, utf16: 7, line: 0, column: 7 }, children: [Edge { label: Some(LeadingTrivia), node: Terminal(TerminalNode { kind: Whitespace, text: " " }) }, Edge { label: Some(Variant), node: Terminal(TerminalNode { kind: PublicKeyword, text: "public" }) }] }) }] }) }, Edge { label: Some(Body), node: Nonterminal(NonterminalNode { kind: FunctionBody, text_len: TextIndex { utf8: 37, utf16: 37, line: 3, column: 0 }, children: [Edge { label: Some(Variant), node: Nonterminal(NonterminalNode { kind: Block, text_len: TextIndex { utf8: 37, utf16: 37, line: 3, column: 0 }, children: [Edge { label: Some(LeadingTrivia), node: Terminal(TerminalNode { kind: Whitespace, text: " " }) }, Edge { label: Some(OpenBrace), node: Terminal(TerminalNode { kind: OpenBrace, text: "{" }) }, Edge { label: Some(TrailingTrivia), node: Terminal(TerminalNode { kind: EndOfLine, text: "\n" }) }, Edge { label: Some(Statements), node: Nonterminal(NonterminalNode { kind: Statements, text_len: TextIndex { utf8: 28, utf16: 28, line: 1, column: 0 }, children: [Edge { label: Some(Item), node: Nonterminal(NonterminalNode { kind: Statement, text_len: TextIndex { utf8: 28, utf16: 28, line: 1, column: 0 }, children: [Edge { label: Some(Variant), node: Nonterminal(NonterminalNode { kind: ExpressionStatement, text_len: TextIndex { utf8: 28, utf16: 28, line: 1, column: 0 }, children: [Edge { label: Some(Expression), node: Nonterminal(NonterminalNode { kind: Expression, text_len: TextIndex { utf8: 26, utf16: 26, line: 0, column: 26 }, children: [Edge { label: Some(Variant), node: Nonterminal(NonterminalNode { kind: AssignmentExpression, text_len: TextIndex { utf8: 26, utf16: 26, line: 0, column: 26 }, children: [Edge { label: Some(LeftOperand), node: Nonterminal(NonterminalNode { kind: Expression, text_len: TextIndex { utf8: 14, utf16: 14, line: 0, column: 14 }, children: [Edge { label: Some(LeadingTrivia), node: Terminal(TerminalNode { kind: Whitespace, text: "        " }) }, Edge { label: Some(Variant), node: Terminal(TerminalNode { kind: Identifier, text: "number" }) }] }) }, Edge { label: Some(LeadingTrivia), node: Terminal(TerminalNode { kind: Whitespace, text: " " }) }, Edge { label: Some(Operator), node: Terminal(TerminalNode { kind: Equal, text: "=" }) }, Edge { label: Some(RightOperand), node: Nonterminal(NonterminalNode { kind: Expression, text_len: TextIndex { utf8: 10, utf16: 10, line: 0, column: 10 }, children: [Edge { label: Some(LeadingTrivia), node: Terminal(TerminalNode { kind: Whitespace, text: " " }) }, Edge { label: Some(Variant), node: Terminal(TerminalNode { kind: Identifier, text: "newNumber" }) }] }) }] }) }] }) }, Edge { label: Some(Semicolon), node: Terminal(TerminalNode { kind: Semicolon, text: ";" }) }, Edge { label: Some(TrailingTrivia), node: Terminal(TerminalNode { kind: EndOfLine, text: "\n" }) }] }) }] }) }] }) }, Edge { label: Some(LeadingTrivia), node: Terminal(TerminalNode { kind: Whitespace, text: "    " }) }, Edge { label: Some(CloseBrace), node: Terminal(TerminalNode { kind: CloseBrace, text: "}" }) }, Edge { label: Some(TrailingTrivia), node: Terminal(TerminalNode { kind: EndOfLine, text: "\n" }) }] }) }] }) }] }) }] }) }, Edge { label: Some(Item), node: Nonterminal(NonterminalNode { kind: ContractMember, text_len: TextIndex { utf8: 59, utf16: 59, line: 4, column: 0 }, children: [Edge { label: Some(Variant), node: Nonterminal(NonterminalNode { kind: FunctionDefinition, text_len: TextIndex { utf8: 59, utf16: 59, line: 4, column: 0 }, children: [Edge { label: Some(LeadingTrivia), node: Terminal(TerminalNode { kind: EndOfLine, text: "\n" }) }, Edge { label: Some(LeadingTrivia), node: Terminal(TerminalNode { kind: Whitespace, text: "    " }) }, Edge { label: Some(FunctionKeyword), node: Terminal(TerminalNode { kind: FunctionKeyword, text: "function" }) }, Edge { label: Some(Name), node: Nonterminal(NonterminalNode { kind: FunctionName, text_len: TextIndex { utf8: 10, utf16: 10, line: 0, column: 10 }, children: [Edge { label: Some(LeadingTrivia), node: Terminal(TerminalNode { kind: Whitespace, text: " " }) }, Edge { label: Some(Variant), node: Terminal(TerminalNode { kind: Identifier, text: "increment" }) }] }) }, Edge { label: Some(Parameters), node: Nonterminal(NonterminalNode { kind: ParametersDeclaration, text_len: TextIndex { utf8: 2, utf16: 2, line: 0, column: 2 }, children: [Edge { label: Some(OpenParen), node: Terminal(TerminalNode { kind: OpenParen, text: "(" }) }, Edge { label: Some(Parameters), node: Nonterminal(NonterminalNode { kind: Parameters, text_len: TextIndex { utf8: 0, utf16: 0, line: 0, column: 0 }, children: [] }) }, Edge { label: Some(CloseParen), node: Terminal(TerminalNode { kind: CloseParen, text: ")" }) }] }) }, Edge { label: Some(Attributes), node: Nonterminal(NonterminalNode { kind: FunctionAttributes, text_len: TextIndex { utf8: 7, utf16: 7, line: 0, column: 7 }, children: [Edge { label: Some(Item), node: Nonterminal(NonterminalNode { kind: FunctionAttribute, text_len: TextIndex { utf8: 7, utf16: 7, line: 0, column: 7 }, children: [Edge { label: Some(LeadingTrivia), node: Terminal(TerminalNode { kind: Whitespace, text: " " }) }, Edge { label: Some(Variant), node: Terminal(TerminalNode { kind: PublicKeyword, text: "public" }) }] }) }] }) }, Edge { label: Some(Body), node: Nonterminal(NonterminalNode { kind: FunctionBody, text_len: TextIndex { utf8: 27, utf16: 27, line: 3, column: 0 }, children: [Edge { label: Some(Variant), node: Nonterminal(NonterminalNode { kind: Block, text_len: TextIndex { utf8: 27, utf16: 27, line: 3, column: 0 }, children: [Edge { label: Some(LeadingTrivia), node: Terminal(TerminalNode { kind: Whitespace, text: " " }) }, Edge { label: Some(OpenBrace), node: Terminal(TerminalNode { kind: OpenBrace, text: "{" }) }, Edge { label: Some(TrailingTrivia), node: Terminal(TerminalNode { kind: EndOfLine, text: "\n" }) }, Edge { label: Some(Statements), node: Nonterminal(NonterminalNode { kind: Statements, text_len: TextIndex { utf8: 18, utf16: 18, line: 1, column: 0 }, children: [Edge { label: Some(Item), node: Nonterminal(NonterminalNode { kind: Statement, text_len: TextIndex { utf8: 18, utf16: 18, line: 1, column: 0 }, children: [Edge { label: Some(Variant), node: Nonterminal(NonterminalNode { kind: ExpressionStatement, text_len: TextIndex { utf8: 18, utf16: 18, line: 1, column: 0 }, children: [Edge { label: Some(Expression), node: Nonterminal(NonterminalNode { kind: Expression, text_len: TextIndex { utf8: 16, utf16: 16, line: 0, column: 16 }, children: [Edge { label: Some(Variant), node: Nonterminal(NonterminalNode { kind: PostfixExpression, text_len: TextIndex { utf8: 16, utf16: 16, line: 0, column: 16 }, children: [Edge { label: Some(Operand), node: Nonterminal(NonterminalNode { kind: Expression, text_len: TextIndex { utf8: 14, utf16: 14, line: 0, column: 14 }, children: [Edge { label: Some(LeadingTrivia), node: Terminal(TerminalNode { kind: Whitespace, text: "        " }) }, Edge { label: Some(Variant), node: Terminal(TerminalNode { kind: Identifier, text: "number" }) }] }) }, Edge { label: Some(Operator), node: Terminal(TerminalNode { kind: PlusPlus, text: "++" }) }] }) }] }) }, Edge { label: Some(Semicolon), node: Terminal(TerminalNode { kind: Semicolon, text: ";" }) }, Edge { label: Some(TrailingTrivia), node: Terminal(TerminalNode { kind: EndOfLine, text: "\n" }) }] }) }] }) }] }) }, Edge { label: Some(LeadingTrivia), node: Terminal(TerminalNode { kind: Whitespace, text: "    " }) }, Edge { label: Some(CloseBrace), node: Terminal(TerminalNode { kind: CloseBrace, text: "}" }) }, Edge { label: Some(TrailingTrivia), node: Terminal(TerminalNode { kind: EndOfLine, text: "\n" }) }] }) }] }) }] }) }] }) }] }) }, Edge { label: Some(CloseBrace), node: Terminal(TerminalNode { kind: CloseBrace, text: "}" }) }, Edge { label: Some(TrailingTrivia), node: Terminal(TerminalNode { kind: EndOfLine, text: "\n" }) }] }) }] }) }] }, child_number: 0, text_offset: TextIndex { utf8: 0, utf16: 0, line: 0, column: 0 } }), nonterminal_node: NonterminalNode { kind: SourceUnitMember, text_len: TextIndex { utf8: 19, utf16: 19, line: 3, column: 0 }, children: [Edge { label: Some(Variant), node: Nonterminal(NonterminalNode { kind: StructDefinition, text_len: TextIndex { utf8: 19, utf16: 19, line: 3, column: 0 }, children: [Edge { label: Some(LeadingTrivia), node: Terminal(TerminalNode { kind: EndOfLine, text: "\n" }) }, Edge { label: Some(LeadingTrivia), node: Terminal(TerminalNode { kind: EndOfLine, text: "\n" }) }, Edge { label: Some(StructKeyword), node: Terminal(TerminalNode { kind: StructKeyword, text: "struct" }) }, Edge { label: Some(LeadingTrivia), node: Terminal(TerminalNode { kind: Whitespace, text: " " }) }, Edge { label: Some(Name), node: Terminal(TerminalNode { kind: Identifier, text: "Hello1" }) }, Edge { label: Some(LeadingTrivia), node: Terminal(TerminalNode { kind: Whitespace, text: " " }) }, Edge { label: Some(OpenBrace), node: Terminal(TerminalNode { kind: OpenBrace, text: "{" }) }, Edge { label: Some(Members), node: Nonterminal(NonterminalNode { kind: StructMembers, text_len: TextIndex { utf8: 0, utf16: 0, line: 0, column: 0 }, children: [] }) }, Edge { label: Some(CloseBrace), node: Terminal(TerminalNode { kind: CloseBrace, text: "}" }) }, Edge { label: Some(TrailingTrivia), node: Terminal(TerminalNode { kind: EndOfLine, text: "\n" }) }] }) }] }, child_number: 1, text_offset: TextIndex { utf8: 65, utf16: 65, line: 3, column: 0 } }), nonterminal_node: NonterminalNode { kind: StructDefinition, text_len: TextIndex { utf8: 19, utf16: 19, line: 3, column: 0 }, children: [Edge { label: Some(LeadingTrivia), node: Terminal(TerminalNode { kind: EndOfLine, text: "\n" }) }, Edge { label: Some(LeadingTrivia), node: Terminal(TerminalNode { kind: EndOfLine, text: "\n" }) }, Edge { label: Some(StructKeyword), node: Terminal(TerminalNode { kind: StructKeyword, text: "struct" }) }, Edge { label: Some(LeadingTrivia), node: Terminal(TerminalNode { kind: Whitespace, text: " " }) }, Edge { label: Some(Name), node: Terminal(TerminalNode { kind: Identifier, text: "Hello1" }) }, Edge { label: Some(LeadingTrivia), node: Terminal(TerminalNode { kind: Whitespace, text: " " }) }, Edge { label: Some(OpenBrace), node: Terminal(TerminalNode { kind: OpenBrace, text: "{" }) }, Edge { label: Some(Members), node: Nonterminal(NonterminalNode { kind: StructMembers, text_len: TextIndex { utf8: 0, utf16: 0, line: 0, column: 0 }, children: [] }) }, Edge { label: Some(CloseBrace), node: Terminal(TerminalNode { kind: CloseBrace, text: "}" }) }, Edge { label: Some(TrailingTrivia), node: Terminal(TerminalNode { kind: EndOfLine, text: "\n" }) }] }, child_number: 0, text_offset: TextIndex { utf8: 65, utf16: 65, line: 3, column: 0 } }),
        //      node: Terminal(TerminalNode { kind: Identifier, text: "Hello1" }),
        //      child_number: 4, text_offset: TextIndex { utf8: 74, utf16: 74, line: 5, column: 7 }, is_completed: false }

        cursors
            .into_iter()
            .filter_map(|mut cursor: Cursor| {
                // log::debug!("{:?}", &cursor);
                log::debug!("{:?}", &cursor.text_range());
                // log::debug!("{:?}", &cursor.text_offset());
                // for _ in 0..45 {
                //     cursor.go_to_parent();
                // }
                // log::debug!("{:?}", &cursor.node());
                // log::debug!("{:?}", &cursor.text_offset());
                // dbg!(&cursor.pAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPnnnnnaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa√¢aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaal                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     ,               )
                // let node = cursor.node();
                // log::debug!("{:?}", &node);
                // node.into_terminal()
                //     .map(|terminal_node| terminal_node.text.clone())
                // None

                let range = cursor.text_range();
                let (start, end) = (range.start, range.end);

                Some(LspMessage::Diagnostics {
                    path: path.clone(),
                    diags: vec![Diagnostic {
                        range: Range::new(
                            Position::new(
                                start.line.try_into().unwrap(),
                                start.column.try_into().unwrap(),
                            ),
                            Position::new(
                                end.line.try_into().unwrap(),
                                end.column.try_into().unwrap(),
                            ),
                        ),
                        severity: Some(DiagnosticSeverity::INFORMATION),
                        message: "Wow that's a really cool struct!!".to_string(),
                        ..Default::default()
                    }],
                })
            })
            .collect()
    }
}
